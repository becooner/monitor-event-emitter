<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="app"></div>
  </body>
  <script src="./lib/bundle.browser.js"></script>
  <script>
    const eventBus = new MonitorEventEmitter({
      maxEvents: 3,
      scope: "MY Test",
      debug: true
    })

    eventBus.on("download", (status) => {
      return status
    })

    eventBus.on("pay", async (random) => {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          if (random > 0.5) {
            resolve({
              status: "success",
              code: random
            })
          } else {
            reject({
              status: "fail",
              code: random
            })
          }
        }, 500)
      })
    })

    eventBus.emit("download", 4399)

    eventBus.emitType("pay", Math.random())

    setTimeout(() => {
      eventBus.emit("pay", Math.random())
    }, 2000)

    setTimeout(() => {
      eventBus.emit("pay", Math.random())
    }, 4000)

    document.getElementById("app").innerText = "hello world"
  </script>
</html>
